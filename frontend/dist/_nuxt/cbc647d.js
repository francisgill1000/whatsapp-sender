(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{414:function(t,e,n){"use strict";n.r(e);var o=n(410),c=n(415),r=n(413),l=n(412),d=n(417),h=n(416),v=n(411),m=n(10),C=n(22),_=(n(8),n(72),n(166),n(38),n(66),{auth:!1,data:function(){var t;return t={loading:!1,ws:null,clientId:"",endpoint:"https://node.wabridge.online/api/send-message",serverUrl:"ws://localhost:5175"},Object(C.a)(t,"endpoint","http://localhost:5176/api/send-message"),Object(C.a)(t,"qrCodeUrl",""),Object(C.a)(t,"statusMessage",""),Object(C.a)(t,"statusColor",""),Object(C.a)(t,"loading",!1),Object(C.a)(t,"isConnected",!1),Object(C.a)(t,"qrImage",null),t},mounted:function(){var t=this;return Object(m.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.connectToWebSocket();case 1:case"end":return e.stop()}}),e)})))()},methods:{disconnect:function(){this.ws&&this.ws.readyState===WebSocket.OPEN?(this.ws.send(JSON.stringify({type:"disconnect",clientId:localStorage.getItem("clientId")})),this.statusMessage="Disconnected from WhatsApp.",this.statusColor="warning",this.qrCodeUrl="",localStorage.removeItem("clientId"),console.log("WhatsApp client disconnected.")):(console.warn("WebSocket is not open or already disconnected."),this.statusMessage="No active connection to disconnect from WhatsApp.",this.statusColor="error")},connectToWebSocket:function(){var t=this;this.clientId="";var e=localStorage.getItem("clientId");e||(e="client_".concat(Math.random().toString(36).substr(2,9)),localStorage.setItem("clientId",e)),this.clientId=e,this.serverUrl.trim()?(this.ws=new WebSocket("".concat(this.serverUrl,"?clientId=").concat(e)),this.loading=!0,this.ws.onopen=function(){console.log("WebSocket connection established."),t.ws.send(JSON.stringify({type:"clientId",clientId:e}))},this.ws.onmessage=function(n){var data=JSON.parse(n.data);null==data.qr?(t.qrCodeUrl=null,t.statusMessage="",t.loading=!1,t.statusColor=""):"qr"===data.type||"clientId"===data.type?(t.qrCodeUrl="https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=".concat(encodeURIComponent(data.qr)),t.statusMessage="Scan the QR code to connect.",t.loading=!1,t.statusColor="red"):"status"===data.type&&data.ready?(console.log("ðŸš€ ~ connectToWebSocket ~ data:",data),t.statusMessage=data.message,t.statusColor="success",t.qrCodeUrl="",t.loading=!1,t.isConnected=!1,t.clientId=e):"error"===data.type&&(t.statusMessage="Error: ".concat(data.message),t.statusColor="error",t.qrCodeUrl="",t.loading=!1)}):alert("Please enter a valid WebSocket server URL.")},reloadPage:function(){location.reload()}}}),w=n(83),component=Object(w.a)(_,(function(){var t=this,e=t._self._c;return e(o.a,[e(d.a,[e(v.a,{staticClass:"mb-3"},[e(l.a,{attrs:{cols:"12"}},[e("h1",[t._v("Whatsapp Bridge")])]),t._v(" "),e(l.a,{attrs:{cols:"12"}},[t.loading?e("p",{staticClass:"mt-3",attrs:{dense:"",flat:""}},[t._v("\n            Waiting for connection...\n          ")]):t._e(),t._v(" "),t.qrCodeUrl?e(v.a,{},[e(l.a,[e(h.a,{attrs:{src:t.qrCodeUrl,"max-width":"300"}})],1)],1):t._e(),t._v(" "),t.statusMessage?e(v.a,{},[e(l.a,{attrs:{cols:"4"}},[e("div",{staticClass:"white ma-2",attrs:{dense:""}},[e(c.a,{staticClass:"mr-5",attrs:{"x-small":"",dense:"","hide-details":"",color:t.statusColor}}),t._v(" "),e("span",[t._v(t._s(t.statusMessage))])],1)])],1):t._e(),t._v(" "),e(v.a,[e(l.a,[e(r.a,[e(d.a,{staticClass:"pa-5"},[e("h3",{staticClass:"white"},[t._v("API Usage Example")]),t._v(" "),e("p",{staticClass:"black white--text pa-2 my-3"},[e("strong",[t._v("Endpoint:")]),t._v(" "),e("code",[t._v(" "+t._s(t.endpoint))])]),t._v(" "),e("div",{staticClass:"black white--text pa-2"},[t._v("Request")]),t._v(" "),e("pre",{staticClass:"black white--text pa-2 mb-3"},[t._v('{\n  "clientId": "'+t._s(t.clientId)+'",\n  "phone": "971xxxxxxxxx",\n  "message": "test message"\n}\n')]),t._v(" "),e("div",{staticClass:"black white--text pa-2"},[t._v("Request")]),t._v(" "),e("pre",{staticClass:"black white--text pa-2 mb-3"},[t._v('{\n  "success": true,\n  "message": "Message sent successfully!"\n}\n')])])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);