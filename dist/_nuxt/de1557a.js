(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{446:function(t,e,n){"use strict";n.r(e);var o=n(450),c=n(447),r=n(444),l=n(443),d=n(449),v=n(448),h=n(442),_=n(445),m=n(16),C=(n(8),n(72),n(170),n(39),{auth:!1,data:function(){var t;return t={loading:!1,ws:null,clientId:"",serverUrl:"wss://node.wabridge.online/ws/",endpoint:"https://node.wabridge.online/api/send-message",qrCodeUrl:"",statusMessage:"",statusColor:""},Object(m.a)(t,"loading",!1),Object(m.a)(t,"isConnected",!1),t},mounted:function(){},methods:{disconnect:function(){this.ws&&this.ws.readyState===WebSocket.OPEN?(this.ws.send(JSON.stringify({type:"disconnect",clientId:localStorage.getItem("clientId")})),this.statusMessage="Disconnected from WhatsApp.",this.statusColor="warning",this.qrCodeUrl="",localStorage.removeItem("clientId"),console.log("WhatsApp client disconnected.")):(console.warn("WebSocket is not open or already disconnected."),this.statusMessage="No active connection to disconnect from WhatsApp.",this.statusColor="error")},connectToWebSocket:function(){var t=this;this.clientId="";var e="client_".concat(Math.random().toString(36).substr(2,9));localStorage.setItem("clientId",e),this.serverUrl.trim()?(this.ws=new WebSocket("".concat(this.serverUrl,"?clientId=").concat(e)),this.loading=!0,this.ws.onopen=function(){console.log("WebSocket connection established."),t.ws.send(JSON.stringify({type:"clientId",clientId:e}))},this.ws.onmessage=function(n){var data=JSON.parse(n.data);console.log("ðŸš€ ~ connectToWebSocket ~ data:",data),"qr"===data.type||"clientId"===data.type?(t.qrCodeUrl="https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=".concat(encodeURIComponent(data.qr)),t.statusMessage="Scan the QR code to connect.",t.loading=!1,t.statusColor="red"):"status"===data.type&&data.ready?(t.statusMessage="WhatsApp client is ready.",t.statusColor="success",t.qrCodeUrl="",t.loading=!1,t.isConnected=!1,t.clientId=e):"error"===data.type&&(t.statusMessage="Error: ".concat(data.message),t.statusColor="error",t.qrCodeUrl="",t.loading=!1)}):alert("Please enter a valid WebSocket server URL.")},reloadPage:function(){location.reload()}}}),w=n(58),component=Object(w.a)(C,(function(){var t=this,e=t._self._c;return e(d.a,[e(h.a,{staticClass:"mb-3"},[e(l.a,{attrs:{cols:"12"}},[e("h1",[t._v("WhatsApp Sender")])]),t._v(" "),e(l.a,{attrs:{cols:"4"}},[e(_.a,{attrs:{label:"Server URL",outlined:"",dense:"","hide-details":""},model:{value:t.serverUrl,callback:function(e){t.serverUrl=e},expression:"serverUrl"}}),t._v(" "),t.loading?e("p",{staticClass:"mt-3",attrs:{dense:"",flat:""}},[t._v("Waiting for connection...")]):t._e()],1),t._v(" "),e(l.a,[t.isConnected?e(c.a,{attrs:{color:"red",dark:""},on:{click:t.disconnect}},[t._v("Disonnect")]):e(c.a,{attrs:{loading:t.loading,color:"primary"},on:{click:t.connectToWebSocket}},[t._v("Connect")])],1),t._v(" "),e(l.a,{attrs:{cols:"12"}},[t.qrCodeUrl?e(h.a,{},[e(l.a,[e(v.a,{attrs:{src:t.qrCodeUrl,"max-width":"300"}})],1)],1):t._e(),t._v(" "),t.statusMessage?e(h.a,{},[e(l.a,{attrs:{cols:"4"}},[e("div",{staticClass:"white ma-2",attrs:{dense:""}},[e(o.a,{staticClass:"mr-5",attrs:{"x-small":"",dense:"","hide-details":"",color:t.statusColor}}),t._v(" "),e("span",[t._v(t._s(t.statusMessage))])],1)])],1):t._e(),t._v(" "),e(h.a,[e(l.a,[e(r.a,[e(d.a,{staticClass:"pa-5"},[e("h3",{staticClass:"white"},[t._v("API Usage Example")]),t._v(" "),e("p",{staticClass:"black white--text pa-2 my-3"},[e("strong",[t._v("Endpoint:")]),t._v(" "),e("code",[t._v(" "+t._s(t.endpoint))])]),t._v(" "),e("div",{staticClass:"black white--text pa-2"},[t._v("Request")]),t._v(" "),e("pre",{staticClass:"black white--text pa-2 mb-3"},[t._v('{\n  "clientId": "'+t._s(t.clientId)+'",\n  "phone": "971xxxxxxxxx",\n  "message": "test message"\n}\n')]),t._v(" "),e("div",{staticClass:"black white--text pa-2"},[t._v("Request")]),t._v(" "),e("pre",{staticClass:"black white--text pa-2 mb-3"},[t._v('{\n  "success": true,\n  "message": "Message sent successfully!"\n}\n')])])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);